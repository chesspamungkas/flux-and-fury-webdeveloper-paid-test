(function(){'use strict';const CONFIG={selectors:{brandTabs:'.brand-tab',caseStudies:'.case-study',mobileMenuToggle:'.mobile-menu-toggle',header:'.site-header',playButton:'.play-button',video:'#testimonial-video'},classes:{active:'active',menuOpen:'menu-open'},animation:{duration:400}};function $(selector,context=document){return context.querySelector(selector)}
function $$(selector,context=document){return context.querySelectorAll(selector)}
function on(elements,event,handler){if(!elements)return;if(elements instanceof NodeList||Array.isArray(elements)){elements.forEach(el=>el.addEventListener(event,handler))}else{elements.addEventListener(event,handler)}}
const BrandSwitcher={tabs:null,panels:null,currentBrand:'jamali-garden',init(){this.tabs=$$(CONFIG.selectors.brandTabs);this.panels=$$(CONFIG.selectors.caseStudies);if(!this.tabs.length||!this.panels.length){console.warn('BrandSwitcher: Required elements not found');return}
this.bindEvents();this.checkUrlHash()},bindEvents(){this.tabs.forEach(tab=>{tab.addEventListener('click',(e)=>{e.preventDefault();const brand=tab.dataset.brand;if(brand){this.switchTo(brand);this.updateUrlHash(brand)}})});window.addEventListener('hashchange',()=>{this.checkUrlHash()})},switchTo(brandId){if(this.currentBrand===brandId)return;this.tabs.forEach(tab=>{const isActive=tab.dataset.brand===brandId;tab.classList.toggle(CONFIG.classes.active,isActive);tab.setAttribute('aria-selected',isActive)});this.panels.forEach(panel=>{const isTarget=panel.dataset.brand===brandId;if(isTarget){panel.hidden=!1;panel.offsetHeight;panel.style.animation='fadeIn 0.4s ease-out forwards'}else{panel.hidden=!0;panel.style.animation=''}});this.currentBrand=brandId;const targetPanel=$(`[data-brand="${brandId}"]`);if(targetPanel){setTimeout(()=>{targetPanel.scrollIntoView({behavior:'smooth',block:'start'})},100)}},updateUrlHash(brandId){if(brandId==='jamali-garden'){history.replaceState(null,null,window.location.pathname)}else{history.replaceState(null,null,`#${brandId}`)}},checkUrlHash(){const hash=window.location.hash.slice(1);if(hash&&['jamali-garden','wateranywhere','fromental'].includes(hash)){this.switchTo(hash)}}};const MobileNav={toggle:null,header:null,isOpen:!1,init(){this.toggle=$(CONFIG.selectors.mobileMenuToggle);this.header=$(CONFIG.selectors.header);if(!this.toggle||!this.header)return;this.bindEvents()},bindEvents(){this.toggle.addEventListener('click',()=>{this.isOpen=!this.isOpen;this.header.classList.toggle(CONFIG.classes.menuOpen,this.isOpen);this.toggle.setAttribute('aria-expanded',this.isOpen)});document.addEventListener('click',(e)=>{if(this.isOpen&&!this.header.contains(e.target)){this.close()}});document.addEventListener('keydown',(e)=>{if(e.key==='Escape'&&this.isOpen){this.close()}})},close(){this.isOpen=!1;this.header.classList.remove(CONFIG.classes.menuOpen);this.toggle.setAttribute('aria-expanded',!1)}};const VideoPlayer={updatePoster(){const videos=$$('video[poster]');const width=window.innerWidth;const isMobile=width<=768;videos.forEach(video=>{if(video.id==='testimonial-video'){let targetPoster;if(isMobile){targetPoster='/assets/DZD_logo_colored_transparent-mobile.webp'}else{targetPoster='/assets/DZD_logo_colored_transparent.webp'}
if(video.poster!==targetPoster){video.poster=targetPoster}}})},init(){const playButtons=$$(CONFIG.selectors.playButton);playButtons.forEach(button=>{button.addEventListener('click',()=>{const wrapper=button.closest('.video-wrapper');const video=$('video',wrapper);if(video){if(video.paused){video.play();button.style.opacity='0';button.style.pointerEvents='none'}}})});this.updatePoster();window.addEventListener('resize',()=>{this.updatePoster()});const videos=$$('video');videos.forEach(video=>{video.addEventListener('pause',()=>{const wrapper=video.closest('.video-wrapper');const button=$(CONFIG.selectors.playButton,wrapper);if(button){button.style.opacity='1';button.style.pointerEvents='auto'}});video.addEventListener('ended',()=>{const wrapper=video.closest('.video-wrapper');const button=$(CONFIG.selectors.playButton,wrapper);if(button){button.style.opacity='1';button.style.pointerEvents='auto'}});video.addEventListener('click',()=>{if(!video.paused){video.pause()}})})}};const ScrollAnimations={observer:null,init(){if(!('IntersectionObserver' in window))return;this.observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add('animate-in');this.observer.unobserve(entry.target)}})},{threshold:0.1,rootMargin:'0px 0px -50px 0px'});const animatedElements=$$('.results-content, .stats-card, .timeline-item, .gallery-content, .video-content');animatedElements.forEach(el=>{el.style.opacity='0';this.observer.observe(el)})}};const SmoothScroll={init(){const anchors=$$('a[href^="#"]');anchors.forEach(anchor=>{anchor.addEventListener('click',(e)=>{const targetId=anchor.getAttribute('href');if(targetId==='#')return;const target=$(targetId);if(target){e.preventDefault();target.scrollIntoView({behavior:'smooth',block:'start'})}})})}};const HeaderScroll={header:null,scrollThreshold:50,init(){this.header=$(CONFIG.selectors.header);if(!this.header)return;this.bindEvents();this.checkScroll()},bindEvents(){window.addEventListener('scroll',()=>{this.checkScroll()},{passive:!0})},checkScroll(){if(window.scrollY>this.scrollThreshold){this.header.classList.add('scrolled')}else{this.header.classList.remove('scrolled')}}};function init(){BrandSwitcher.init();MobileNav.init();VideoPlayer.init();ScrollAnimations.init();SmoothScroll.init();HeaderScroll.init()}
if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',init)}else{init()}
window.DZD={switchBrand:(brandId)=>BrandSwitcher.switchTo(brandId),getCurrentBrand:()=>BrandSwitcher.currentBrand}})()